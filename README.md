# DonorSearch — SQL case (учебный)

Учебный SQL-кейс: ответы на продуктовые вопросы по донорской платформе на основе данных о пользователях и донациях.

Формат проекта: один SQL-файл с запросами и короткими выводами по каждой задаче.

## Цели анализа

1) Найти регионы с наибольшим количеством зарегистрированных доноров.  
2) Изучить динамику общего количества донаций по месяцам за 2022–2023 годы.  
3) Определить наиболее активных доноров (по подтверждённым донациям).  
4) Оценить связь бонусной системы и активности доноров.  
5) Оценить каналы привлечения через соцсети и среднюю активность по каналам.  
6) Сравнить активность повторных доноров и проверить качество дат в данных.  
7) Сопоставить планируемые донации с фактическими (plan vs fact).

## Что сделано (коротко)

- Посчитал топ регионов по числу зарегистрированных доноров и отметил проблему пропусков региона.
- Построил помесячную динамику донаций за 2022–2023 и описал сезонность.
- Выделил пул самых активных доноров по количеству подтверждённых донаций.
- Сравнил активность доноров с бонусами и без (корреляционный срез).
- Разложил доноров по каналам соц.авторизации и сравнил среднюю активность (для доноров с ≥ 1 донацией).
- Сегментировал повторных доноров по частоте и выявил аномалии длительности активности.
- Посчитал долю выполнения планов донаций по типам (план vs факт).

## Ключевые выводы

- **Качество данных:** встречаются пустые значения региона; также заметны аномальные длительности активности, что указывает на возможные проблемы с датами.
- **Сезонность:** в динамике донаций заметны пики весной и периоды снижения в середине/конце года.
- **Бонусы:** доноры с бонусами в среднем активнее; важно помнить, что это корреляция и возможен эффект отбора.
- **Каналы привлечения:** каналы отличаются по масштабу и средней активности; есть смысл сравнить долю повторных доноров по каналам.
- **Планирование:** доля выполненных планов низкая и различается по типу донации — зона для улучшения механик вовлечения и коммуникаций.

## Что бы улучшил дальше

- Посчитать долю пустого `region` и предложить способ валидации/обязательности заполнения.
- Сравнить 2022 vs 2023 по YoY (месяц к месяцу) и выделить месяцы с максимальными изменениями.
- Проверить вклад топ-N доноров в общий объём подтверждённых донаций.
- Для бонусов: сравнить активность одного и того же донора **до/после первого бонуса** (а не только “с бонусами / без”).
- По каналам: посчитать долю повторных доноров (`confirmed_donations >= 2`) и сравнить её между каналами.
- Очистить/отфильтровать некорректные даты и пересчитать метрики повторяемости и “длительности активности”.
- План vs факт: разложить `completion_rate` по месяцам и по сегментам доноров (новые/повторные).

## Файлы

- `sql/analysis.sql` — запросы и короткие выводы по всем задачам.

## Инструменты

SQL (JOIN, CTE, агрегаты, DATE_TRUNC)
